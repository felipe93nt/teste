<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:presCore="http://bradesco.com.br/presentation_core" xmlns:awb-br="http://bradesco.com.br/components-br"
    xmlns:awb-f="http://bradesco.com.br/components-core" xmlns:awb-h="http://bradesco.com.br/components-html"
    xmlns:awb-th="http://bradesco.com.br/components-th-ext" xmlns:f="http://java.sun.com/jsf/core" lang="pt">

<ui:composition template="/template/root/mainLayoutCore.xhtml">
<ui:define name="body"> 

    <body>
        
        <!-- css -->
        <awb-br:stylesheet href="/css/pages.css" />

        <!-- FORM -->
        <awb-h:form id="formModalComissExt" >
            <awb-h:panelGrid styleClass="panelGridTable">
                <awb-h:column>

                    <awb-h:panelGrid id="pnlDadosComissao" columns="8" styleClass="panelGridTable">
                        <!-- LINHA CABEC -->
                        <awb-h:panelGroup>
                            <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                            <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                value="Tipo:"/>
                        </awb-h:panelGroup>
                        
                        <awb-h:panelGroup>
                            <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                            <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                value="Cobrança Comissão:" />
                        </awb-h:panelGroup>
        
                        <awb-h:panelGroup>
                            <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                            <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                value="Valor:" />
                        </awb-h:panelGroup>

                        <awb-h:panelGroup>
                            <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                            <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                value="Taxa:" />
                        </awb-h:panelGroup>
		
		                <awb-h:panelGroup>
		                    <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
		                    <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
		                        value="Moeda:" />
		                </awb-h:panelGroup>
		
		                <awb-h:panelGroup>
		                    <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
		                    <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
		                        value="Periodicidade:" />
		                </awb-h:panelGroup>
		
		                <awb-h:panelGroup>
		                    <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
		                    <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
		                        value="Momento:" />
		                </awb-h:panelGroup>
        
                        <awb-h:panelGroup>
                            <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                            <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                value="Parcelas:" />
                        </awb-h:panelGroup>
		
		                <!-- LINHA DADOS -->
		                
		               <awb-h:panelGroup>
		                   <awb-h:selectOneMenu id="comboCobraComiss" layout="pageDirection" styleClass="auto-focus" tabindex="1"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}" 
                                style="width: 170px;font-family: verdana; font-size: 10px"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.ccondceconc}">
		                       <awb-f:selectItems value="#{comissaoExtManutModalBean.viewHelper.comboTipoComissao}" />
		                   </awb-h:selectOneMenu>
		               </awb-h:panelGroup>
                       
                       <awb-h:panelGroup>
                           <awb-h:selectOneMenu id="comboPerTaxa" layout="pageDirection" tabindex="2"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                style="width: 60px;font-family: verdana; font-size: 10px" immediate="false"
                                styleClass="ajax-no-loading"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.cperdcjurocmbio}">
                                <awb-f:selectItems value="#{comissaoExtManutModalBean.viewHelper.comboPeriodoDaTaxa}" />
                                <f:ajax immediate="false" execute="@form" event="change"
                                    render="formModalMessages pnlDadosIrregular formModalComissExt btnConfirmar"
                                    listener="#{comissaoExtManutModalBean.listenerTrocaPeriodoDaTaxa}" />
                           </awb-h:selectOneMenu>
                       </awb-h:panelGroup>
		
		                <awb-h:panelGroup>
		                    <awb-h:inputText id="txtValorComiss" tabindex="3"
                                alt="{'type':'money-dot'}" maxlength="18" size="22"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt or comissaoExtManutModalBean.viewHelper.disabledValorComissaoExt}"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.vlxtotalcomis}"
		                        styleClass="HtmlInputTextBradesco ajax-no-loading">
                                <f:ajax immediate="false" execute="@form" event="change"
                                    render="formModalMessages pnlDadosIrregular formModalComissExt btnConfirmar"
                                    listener="#{comissaoExtManutModalBean.listenerTrocaValorTaxa}" />
		                    </awb-h:inputText>
		                </awb-h:panelGroup>

		                <awb-h:panelGroup>
		                    <awb-h:inputText id="txtTaxa" styleClass="HtmlInputTextBradesco ajax-no-loading" tabindex="4"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt or comissaoExtManutModalBean.viewHelper.disabledValorTaxaQuandoIrregular or comissaoExtManutModalBean.viewHelper.disabledTaxaComissaoExt}"
                                alt='{"wholePartSize": 3, "decimalPartSize": 5}' size="9"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.pjuronegoccmbio}">
                                <f:ajax immediate="false" execute="@form" event="change"
                                    render="formModalMessages pnlDadosIrregular formModalComissExt btnConfirmar"
                                    listener="#{comissaoExtManutModalBean.listenerTrocaValorTaxa}" />
		                    </awb-h:inputText>
		                    <awb-h:outputLabel styleClass="HtmlOutputTextBradesco" for="txtTaxa" value=" %" />
		                </awb-h:panelGroup>
		
		               <awb-h:panelGroup>
		                   <awb-h:selectOneMenu id="comboMoedaComiss" layout="pageDirection" title="Moeda Comissão" tabindex="5"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                style="width: 100px;font-family: verdana; font-size: 10px" immediate="false" styleClass="ajax-no-loading"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.cindcdeconmmoeda}">
		                        <awb-f:selectItems value="#{comissaoExtManutModalBean.viewHelper.comboMoedaDesembolso}" />
                                <f:ajax immediate="false" execute="@form" event="change"
                                    render="formModalMessages pnlDadosIrregular formModalComissExt"
                                    listener="#{comissaoExtManutModalBean.listenerTrocaMoeda}" />
		                   </awb-h:selectOneMenu>
		               </awb-h:panelGroup>
		
		               <awb-h:panelGroup>
		                   <awb-h:selectOneMenu id="comboPeriodicidade" layout="pageDirection" title="Comissão Sobre" tabindex="6"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                style="width: 130px;font-family: verdana; font-size: 10px" immediate="false"
                                styleClass="ajax-no-loading"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.cfluxoperdccmbio}">
                                <awb-f:selectItems value="#{comissaoExtManutModalBean.viewHelper.comboPeriodicidade}" />
                                <f:ajax immediate="false" execute="@form" event="change"
                                    render="formModalMessages pnlDadosIrregular div_dataTableTarifas formModalComissExt txtValorComiss txtTaxa btnConfirmar"
                                    listener="#{comissaoExtManutModalBean.listenerTrocaPeriodicidadeComissaoExterna}" />
                           </awb-h:selectOneMenu>
                       </awb-h:panelGroup>
                        
                        <awb-h:panelGroup>
                           <awb-h:selectOneMenu id="comboMomento" layout="pageDirection" title="Moeda Comissão" tabindex="7"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                style="width: 100px;font-family: verdana; font-size: 10px"  immediate="false"
                                styleClass="ajax-no-loading"
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.codMomentoComissao}">
		                        <awb-f:selectItems value="#{comissaoExtManutModalBean.viewHelper.comboMomento}" />
                                <f:ajax immediate="false" execute="@form" event="change"
                                    render="formModalMessages pnlDadosIrregular formModalComissExt"
                                    listener="#{comissaoExtManutModalBean.listenerTrocaMomento}" />
		                   </awb-h:selectOneMenu>
		                </awb-h:panelGroup>
        
                        <awb-h:panelGroup>
                            <awb-h:inputText id="txtParcelas" maxlength="5" size="7"  alt="{'type':'integer'}" tabindex="8"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledTxtParcelaComissaoExt}" 
                                value="#{comissaoExtManutModalBean.itemListaComissaoExterna.qpcelacmbiotrade}"
                                styleClass="HtmlInputTextBradesco">
                            </awb-h:inputText>
                        </awb-h:panelGroup>
		            </awb-h:panelGrid>

                    <awb-h:panelGrid columns="1" styleClass="right">
                        <awb-h:commandButton id="btoGerar" value="Gerar" styleClass="HtmlCommandButtonBradesco ajax-no-loading" tabindex="9"
                                disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt or comissaoExtManutModalBean.viewHelper.disabledBotaoGerar}">
                             <f:ajax immediate="false" execute="@form" event="click" 
                                render="formModalComissExt formModalMessages"
                                listener="#{comissaoExtManutModalBean.listenerGerarParcelaComissaoExterna}" />
                        </awb-h:commandButton>
                    </awb-h:panelGrid>

                    <!-- LINHA DIVISÓRIA -->
                    <awb-h:panelGrid styleClass="panelGridTable">
                        <awb-f:verbatim>
                            <hr />
                        </awb-f:verbatim>
                    </awb-h:panelGrid>

                    <awb-h:panelGrid id="pnlDadosIrregular" columns="5" styleClass="panelGridTable"
                        rendered="#{comissaoExtManutModalBean.itemListaComissaoExterna.periodicidadeIrregular}">
                        <!-- <awb-h:panelGrid>
                            <awb-h:panelGroup>
                                <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                                <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                    value="#{msgs.label_n_parcela}" />
                            </awb-h:panelGroup>

                            <awb-h:panelGroup>
                                <awb-h:inputText id="txtNumParcela" styleClass="HtmlInputTextBradesco"
                                    disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                    alt="{'type':'integer'}" maxlength="5" size="7"
                                     value="#{comissaoExtManutModalBean.itemListaParcelaIrreg.npcelacomis}">
                                </awb-h:inputText>
                            </awb-h:panelGroup>
                        </awb-h:panelGrid> -->

                        <awb-h:panelGrid>
                            <awb-h:panelGroup>
                                <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                                <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                    value="#{msgs.label_prazo}" />
                            </awb-h:panelGroup>

                            <awb-h:panelGroup>
                                <awb-h:inputText id="txtPrazo" styleClass="HtmlInputTextBradesco ajax-no-loading" tabindex="10"
                                    disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                    alt="{'type':'integer'}" maxlength="5" size="7"
                                    value="#{comissaoExtManutModalBean.itemListaParcelaIrreg.tdianegocpcela}">
	                                    <f:ajax execute="@form" event="change"
	                                        immediate="false" render="formModalMessages pnlDadosIrregular btnConfirmar"
	                                        listener="#{comissaoExtManutModalBean.listenerTrocaPrazo}" />
                                </awb-h:inputText>
                            </awb-h:panelGroup>
                        </awb-h:panelGrid>

                        <awb-h:panelGrid columns="1" styleClass="panelGridTable">

                            <awb-h:panelGroup>
                                <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                                <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                    value="#{msgs.label_vencimento}" />
                            </awb-h:panelGroup>
            
                            <awb-h:panelGroup>
                                <awb-br:calendar id="dataVencimento" disableInputFields="false" tabindex="11"
                                    disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                    onInputChange="limpaData('formModalComissExt:dataVencimento','listenerTrocaVencimento')"
                                    onFieldFilled="errorStyleChanger"
                                    onFieldFilledParameters="bundleFunction: 'getBundle', bundlePrefix: 'UICalendar'"
                                    value="#{comissaoExtManutModalBean.itemListaParcelaIrreg.dateVctopcelatrade}" />
                                <awb-h:outputLabel value=" " escape="false" />
                                
                                <awb-h:commandButton style="display:none;" styleClass="ajax-call listenerTrocaVencimento ajax-no-loading" tabindex="12">
                                    <f:ajax execute="@form" event="click"
                                             immediate="false" render="formModalMessages pnlDadosIrregular"
                                             listener="#{comissaoExtManutModalBean.listenerTrocaVencimento}" />
                                </awb-h:commandButton>
                                
                            </awb-h:panelGroup>
                        </awb-h:panelGrid>

                        <awb-h:panelGrid>
                            <awb-h:panelGroup>
                                <awb-h:graphicImage styleClass="bullet" url="/images/bullet.jpg" />
                                <awb-h:outputLabel styleClass="HtmlOutputTextBoldBradesco" 
                                    value="#{msgs.label_valor}" />
                            </awb-h:panelGroup>

                            <awb-h:panelGroup>
                                <awb-h:inputText id="txtValor" styleClass="HtmlInputTextBradesco ajax-no-loading" tabindex="13"
                                    disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                    alt="{'type':'money-dot'}" maxlength="18" size="22"
                                    value="#{comissaoExtManutModalBean.itemListaParcelaIrreg.vpcelacomiscmbio}">
                                </awb-h:inputText>
                            </awb-h:panelGroup>
                        </awb-h:panelGrid>
        
                        <awb-h:panelGrid columns="2" styleClass="right">
                            <awb-h:panelGroup>
                                <awb-h:commandButton styleClass="HtmlCommandButtonBradesco ajax-no-loading" id="btoIncluirComiss" tabindex="14"
                                    disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt or comissaoExtManutModalBean.viewHelper.disabledBtoInclParcIrregComExt}"
                                    value="#{msgs.bto_incluir}">
                                    <f:ajax immediate="false" execute="@form" event="click"
                                        render="pnlLstParcComiss formModalComissExt formModalMessages btnConfirmar"
                                        listener="#{comissaoExtManutModalBean.listenerIncluirParcelaIrregular}" />
                                </awb-h:commandButton>
                            </awb-h:panelGroup>

                            <awb-h:panelGroup>
                                <awb-h:commandButton styleClass="HtmlCommandButtonBradesco ajax-no-loading" id="btoExcluirComiss" tabindex="15"
                                    disabled="#{empty comissaoExtManutModalBean.itemListaComissaoExterna.listaParcelasComissao or
                                    comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                                    value="#{msgs.bto_excluir}">
                                    <f:ajax immediate="false" execute="pnlDadosIrregular pnlLstParcComiss" event="click"
                                        render="pnlLstParcComiss formModalComissExt formModalMessages btnConfirmar"
                                        listener="#{comissaoExtManutModalBean.listenerExcluirParcelaIrregular}" />
                                </awb-h:commandButton>
                            </awb-h:panelGroup>
                        </awb-h:panelGrid>
                    </awb-h:panelGrid>
        
                    <!-- GRID -->
                    <awb-h:panelGrid id="pnlLstParcComiss" styleClass="panelGridDataTable"
                        rendered="#{not empty comissaoExtManutModalBean.itemListaComissaoExterna.listaParcelasComissao}">
            
                        <!-- RADIO GRID LISTA -->
                        <awb-f:facet name="header">
                            <awb-th:extSelectOneRadio id="radioLstParcComiss" layout="spread" immediate="false" tabindex="16"
                                forceId="true" forceIdIndex="false"
                                value="#{comissaoExtManutModalBean.viewHelper.itemSelecListaParcelaComiss}">
                                <awb-f:selectItems value="#{comissaoExtManutModalBean.itensRadioListaParcelaComiss}"/>
                            </awb-th:extSelectOneRadio>
                        </awb-f:facet>
            
                        <!-- GRID -->
                        <awb-h:panelGrid styleClass="panelGridDataTable" columnClasses="scrollable-horizontal-bar">
                            <awb-th:extDiv styleClass="overflow-auto full-size" id="div_dataTableTarifas">
                                <awb-br:keepState pdcDataScrollerID="dataScroller"
                                    stateID="#{comissaoExtManutModalBean.viewHelper.stateIdListaParcelasComissao}" resource="cws">
                                    <awb-br:scrollableDataTable id="dataParcelas" 
                                       value="#{comissaoExtManutModalBean.itemListaComissaoExterna.listaParcelasComissao}"
                                       var="item" rows="4" width="100%" rowIndexVar="indexLista">
                
                                        <awb-br:scrollableColumn width="3%"
                                            rendered="#{comissaoExtManutModalBean.itemListaComissaoExterna.periodicidadeIrregular}">
                                            <awb-f:facet name="header">
                                                <awb-h:outputLabel value=" " styleClass="tableFontStyle" escape="false" />
                                            </awb-f:facet>
                                            <awb-th:extRadio index="#{indexLista}"
                                                for=":formModalComissExt:radioLstParcComiss" />
                                        </awb-br:scrollableColumn>
                       
                                       <awb-br:scrollableColumn width="15%" styleClass="c">
                                           <awb-f:facet name="header">
                                               <awb-h:outputLabel value="#{msgs.label_n_parcela}" styleClass="tableFontStyle"
                                                   escape="false" />
                                           </awb-f:facet>
                                           <awb-h:outputLabel value="#{item.npcelacomis}" />
                                       </awb-br:scrollableColumn>
                       
                                       <awb-br:scrollableColumn width="20%" styleClass="c">
                                           <awb-f:facet name="header">
                                               <awb-h:outputLabel value="#{msgs.label_prazo}" styleClass="tableFontStyle" escape="false" />
                                           </awb-f:facet>
                                           <awb-h:outputLabel value="#{item.tdianegocpcela}" />
                                       </awb-br:scrollableColumn>
                       
                                       <awb-br:scrollableColumn width="23%" styleClass="c">
                                           <awb-f:facet name="header">
                                               <awb-h:outputLabel value="#{msgs.label_vencimento}" styleClass="tableFontStyle" escape="false" />
                                           </awb-f:facet>
                                           <awb-h:outputLabel value="#{item.vencimentoComissao}" />
                                       </awb-br:scrollableColumn>
                       
                                       <awb-br:scrollableColumn width="39%" styleClass="r">
                                           <awb-f:facet name="header">
                                               <awb-h:outputLabel value="#{msgs.label_valor}" styleClass="tableFontStyle" escape="false" />
                                           </awb-f:facet>
                                           <awb-h:outputLabel value="#{item.valorParcelaComissao}" />
                                       </awb-br:scrollableColumn>
                                    </awb-br:scrollableDataTable>
                                </awb-br:keepState>
                            </awb-th:extDiv>
                        </awb-h:panelGrid>
                        
                        <!-- PAGINACAO -->
                        <awb-br:awbDataScroller id="dataScroller" for="dataParcelas"
                            renderFacetsIfSinglePage="true" resource="cws" styleClass="pagination"
                            stateID="#{comissaoExtManutModalBean.viewHelper.stateIdListaParcelasComissao}">
                            <f:facet name="first">
                                <awb-br:awbCommandButton styleClass="button ajax-no-loading" value="#{msgs.label_primeira}"
                                    title="#{msgs.label_txt_primeira}" />
                            </f:facet>
                            <f:facet name="fastrewind">
                                <awb-br:awbCommandButton styleClass="button pagination-btn ajax-no-loading"
                                    value="#{msgs.label_retrocesso}" title="#{msgs.label_txt_retrocesso}" />
                            </f:facet>
                            <f:facet name="previous">
                                <awb-br:awbCommandButton styleClass="button pagination-btn ajax-no-loading"
                                    value="#{msgs.label_anterior}" title="#{msgs.label_txt_anterior}" />
                            </f:facet>
                            <f:facet name="next">
                                <awb-br:awbCommandButton styleClass="button pagination-btn ajax-no-loading"
                                    value="#{msgs.label_proxima}" title="#{msgs.label_txt_proxima}" />
                            </f:facet>
                            <f:facet name="fastforward">
                                <awb-br:awbCommandButton styleClass="button pagination-btn ajax-no-loading" value="#{msgs.label_avanco}"
                                    title="#{msgs.label_txt_avanco}" />
                            </f:facet>
                            <f:facet name="last">
                                <awb-br:awbCommandButton styleClass="button pagination-btn ajax-no-loading" value="#{msgs.label_ultima}"
                                    title="#{msgs.label_txt_ultima}" />
                            </f:facet>
                        </awb-br:awbDataScroller>
                    </awb-h:panelGrid>

                </awb-h:column>
            </awb-h:panelGrid>
            <br />

            <awb-h:commandButton id="botaoCancelar" value="Cancelar" style="left: 0; bottom: 0; position: absolute;"
                styleClass="HtmlCommandButtonBradesco left" tabindex="19" />
            <awb-h:commandButton value="#{msgs.bto_limpar}" tabindex="18"
                 disabled="#{comissaoExtManutModalBean.viewHelper.disabledModalComissaoExt}"
                style="right: 72px; bottom: 0; position: absolute;" styleClass="HtmlCommandButtonBradesco right ajax-no-loading">
                <f:ajax immediate="false" execute="@form" event="click" render="formModalComissExt formModalMessages"
                    listener="#{comissaoExtManutModalBean.limpar}" />
            </awb-h:commandButton>
            <awb-h:commandButton action="#{comissaoExtManutModalBean.confirmaModalComissaoExterna}" value="Confirmar" tabindex="17"
                style="right: 0; bottom: 0; position: absolute;" styleClass="HtmlCommandButtonBradesco right" id="btnConfirmar"
                disabled="#{comissaoExtManutModalBean.viewHelper.disabledConfirmar}"/>
        </awb-h:form>

        <!-- Script geral da aplicação -->
        <script type="text/javascript" src="#{request.contextPath}/javascript/app.js" />
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/javascript/brq.jquery.mask.js" />
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/javascript/brq.jquery.util.js" />
		
    </body>
</ui:define>
</ui:composition>

</html>