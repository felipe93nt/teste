<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:awb-h="http://bradesco.com.br/components-html"
	xmlns:awb-f="http://bradesco.com.br/components-core"
	xmlns:awb-th="http://bradesco.com.br/components-th-ext"
	xmlns:awb-br="http://bradesco.com.br/components-br"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:presCore="http://bradesco.com.br/presentation_core">

<div class="scrollCentralAbas">
	<awb-h:panelGrid id="abaConcluidas" columns="1" border="0" cellpadding="0" cellspacing="0"
		width="98%" styleClass="gridPrincipal abaPanelGrid">
		<awb-th:extDiv styleClass="abaDiv" style="border-radius: 5px;">
			<awb-h:panelGrid columns="1" cellpadding="0" cellspacing="0" width="98%">
				<awb-th:extDiv style="overflow-x: auto; width: 1280px">
					<awb-br:editableDataTable id="tblObrasConcluidas" var="item"
						selectionMode="selectOne" width="3000px" height="200px"
						selection="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.obrasConcluidasSelecionado}"
						value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.listaObrasConcluidas}">
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_incorporadora}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtIncorp"
								styleClass="HtmlInputTextBradesco" maxlength="30"
								value="#{item.incorporadora}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_nome_empreendimento}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtEmpreendimento"
								styleClass="HtmlInputTextBradesco" maxlength="50"
								value="#{item.nomeEmpreendimento}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_bairro}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtBairro"
								styleClass="HtmlInputTextBradesco" style=""
								value="#{item.bairro}" maxlength="40">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_cidade}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtCidade"
								styleClass="HtmlInputTextBradesco" style=""
								value="#{item.cidade}" maxlength="40">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_uf}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtUf" styleClass="HtmlInputTextBradesco"
								style="" maxlength="2" value="#{item.uf}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_data_entrega}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="dtEntrega" alt="data"
								value="#{item.dataEntrega}" />
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_recebidos}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtValRecebidos"
								styleClass="HtmlInputTextBradesco" alt="valorSemCasas15"
								onkeyup="vNumero(this,'9(15)'); setTimeout('atualizarTotalRecebidos()', 100);"
								value="#{item.valoresRecebidos}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_ate12meses}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txt12meses"
								styleClass="HtmlInputTextBradesco" alt="valorSemCasas15"
								onkeyup="vNumero(this,'9(15)'); setTimeout('atualizarTotal12meses()', 100);"
								value="#{item.valoresAte12Meses}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_1236meses}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txt1236meses"
								styleClass="HtmlInputTextBradesco" alt="valorSemCasas15"
								onkeyup="vNumero(this,'9(15)'); setTimeout('atualizarTotal1236meses()', 100);"
								value="#{item.valoresDe12Ate36Meses}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_apos36meses}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txt36meses"
								styleClass="HtmlInputTextBradesco" alt="valorSemCasas15"
								onkeyup="vNumero(this,'9(15)'); setTimeout('atualizarTotal36meses()', 100);"
								value="#{item.valoresApos36Meses}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_qtde_unidades}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtQtdUnidades"
								styleClass="HtmlInputTextBradesco" alt="numero9Formatado"
								onkeyup="vNumero(this,'9(9)'); setTimeout('atualizarTotalQtdUnidades()', 100);" 
								value="#{item.qtdeUnidades}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_valor_estoque}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtValEstoque"
								styleClass="HtmlInputTextBradesco" alt="valorSemCasas15"
								onkeyup="vNumero(this,'9(15)'); setTimeout('atualizarTotalValEstoque()', 100);" 
								value="#{item.valorEstoque}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_porcentagem_vendas}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtPorcVendas"
								styleClass="HtmlInputTextBradesco" alt="percentualDuasCasas"
								onkeyup="vNumero(this,'9(3)V9(2)');"
								value="#{item.porcentagemVendas}">
							</awb-h:inputText>
						</awb-br:editableColumn>

						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_agente_financeiro}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtAgFinanc"
								styleClass="HtmlInputTextBradesco" maxlength="30"
								value="#{item.agenteFinanceiro}">
							</awb-h:inputText>
						</awb-br:editableColumn>
						<awb-br:editableColumn>
							<awb-f:facet name="header">
								<awb-h:outputLabel value="#{msgs.label_saldo_devedor}"
									styleClass="tableFontStyle" />
							</awb-f:facet>
							<awb-h:inputText id="txtSaldoDev"
								styleClass="HtmlInputTextBradesco" alt="valorSemCasas15"
								onkeyup="vNumero(this,'9(15)'); setTimeout('atualizarTotalSaldoDev()', 100);" 
								value="#{item.saldoDevedor}">
							</awb-h:inputText>
						</awb-br:editableColumn>
					</awb-br:editableDataTable>
					<awb-h:panelGrid id="totalizadoresObrasConcluidas" columns="26"
						cellpadding="0" cellspacing="0">
						<awb-h:panelGrid width="200px;">
							<awb-h:outputLabel value="#{msgs.label_total}:"
								styleClass="HtmlOutputLabelBoldBradesco" />
						</awb-h:panelGrid>
						
						<awb-h:panelGrid width="200px;"/>
						<awb-h:panelGrid width="195px;"/>
						<awb-h:panelGrid width="200px;"/>
						<awb-h:panelGrid width="200px;"/>
						<awb-h:panelGrid width="200px;"/>
						
						<awb-h:panelGrid columns="1" width="200px;">
							<awb-h:outputLabel id="totalRecebidos"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.totalRecebidosFormatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
						<awb-h:panelGrid columns="1" width="200px;">
							<awb-h:outputLabel id="total12Meses"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.total12MesesFormatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
						<awb-h:panelGrid columns="1" width="195px;">
							<awb-h:outputLabel id="total12A36"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.total12A36Formatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
						<awb-h:panelGrid columns="1" width="200px;">
							<awb-h:outputLabel id="totalApos36"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.totalApos36Formatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
						<awb-h:panelGrid columns="1" width="200px;">
							<awb-h:outputLabel id="totalUnidades"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.totalUnidadesFormatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
						<awb-h:panelGrid columns="1" width="200px;">
							<awb-h:outputLabel id="totalValorEstoque"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.totalValorEstoqueFormatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
						<awb-h:panelGrid width="200px;"/>
						<awb-h:panelGrid width="200px;"/>
						<awb-h:panelGrid columns="1" width="190px;">
							<awb-h:outputLabel id="totalSaldoDevedor"
								value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.totalSaldoDevedorFormatado}"
								style="float:right;" styleClass="HtmlOutputLabelBoldBradesco">
							</awb-h:outputLabel>
						</awb-h:panelGrid>
					</awb-h:panelGrid>
				</awb-th:extDiv>
			</awb-h:panelGrid>

			<awb-h:panelGrid width="100%" style="margin-left:-4px">
				<awb-h:outputLabel styleClass="HtmlOutputLabelBoldBradesco"
					value="#{msgs.label_comentarios_obras_concluidas}" />
				<awb-h:inputTextarea id="txtDescObrasConcluidas" rows="10"
					cols="248" styleClass="HtmlInputTextareaBradesco"
					onblur="imposeMaxLength(this, 5000)"
					onkeydown="imposeMaxLength(this, 5000)"
					onfocus="imposeMaxLength(this, 5000)"
					onkeypress="imposeMaxLength(this, 5000)"
					value="#{questionarioImobiliarioBean.viewHelper.questionarioImobiliarioVO.obrasConcluidas.descObrasConcluidas}">
					<f:ajax event="blur"
						listener="#{questionarioImobiliarioBean.atualizaComentarioObrasConcluidas}" />
				</awb-h:inputTextarea>
			</awb-h:panelGrid>
			
			<h:outputScript>
			
					function carregarDadosConcluidas(){
					
						atualizarTotalRecebidos();
						atualizarTotal12meses();
						atualizarTotal1236meses();
						atualizarTotal36meses();
						atualizarTotalQtdUnidades();
						atualizarTotalValEstoque();
						atualizarTotalSaldoDev();
						
					}
					
					function atualizarTotalRecebidos(){
						debugger;
						var row = 0;
						var somaTotalRecebidos = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txtValRecebidos = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txtValRecebidos").val().replace(/\./g, ''));
									
									if(txtValRecebidos){
										somaTotalRecebidos = somaTotalRecebidos + txtValRecebidos; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:totalRecebidos").text(somaTotalRecebidos.toLocaleString('pt-BR'));
					}
					
					function atualizarTotal12meses(){
						
						var row = 0;
						var soma12meses = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txt12meses = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txt12meses").val().replace(/\./g, ''));
									
									if(txt12meses){
										soma12meses = soma12meses + txt12meses; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:total12Meses").text(soma12meses.toLocaleString('pt-BR'));
					}
					
					function atualizarTotal1236meses(){
						
						var row = 0;
						var soma1236meses = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txt1236meses = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txt1236meses").val().replace(/\./g, ''));
									
									if(txt1236meses){
										soma1236meses = soma1236meses + txt1236meses; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:total12A36").text(soma1236meses.toLocaleString('pt-BR'));
					}
					
					function atualizarTotal36meses(){
						
						var row = 0;
						var soma36meses = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txt36meses = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txt36meses").val().replace(/\./g, ''));
									
									if(txt36meses){
										soma36meses = soma36meses + txt36meses; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:totalApos36").text(soma36meses.toLocaleString('pt-BR'));
					}
					
					function atualizarTotalQtdUnidades(){
						
						var row = 0;
						var somaQtdUnidades = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txtQtdUnidades = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txtQtdUnidades").val().replace(/\./g, ''));
									
									if(txtQtdUnidades){
										somaQtdUnidades = somaQtdUnidades + txtQtdUnidades; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:totalUnidades").text(somaQtdUnidades.toLocaleString('pt-BR'));
					}
					
					function atualizarTotalValEstoque(){
						
						var row = 0;
						var somaValEstoque = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txtValEstoque = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txtValEstoque").val().replace(/\./g, ''));
									
									if(txtValEstoque){
										somaValEstoque = somaValEstoque + txtValEstoque; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:totalValorEstoque").text(somaValEstoque.toLocaleString('pt-BR'));
					}
					
					function atualizarTotalSaldoDev(){
						
						var row = 0;
						var somaSaldoDev = 0;
						
						$jB(function() {
							$jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_-1").each(function(){
								$jB("tbody tr", $jB(this)).each(function(){
									
									var txtSaldoDev = parseInt($jB("#questionarioImobiliarioForm\\:tblObrasConcluidas_"+row+"\\:"+row+"\\:txtSaldoDev").val().replace(/\./g, ''));
									
									if(txtSaldoDev){
										somaSaldoDev = somaSaldoDev + txtSaldoDev; 
									}

						    		row++;
								});
							});
						});
						$jB("#questionarioImobiliarioForm\\:totalSaldoDevedor").text(somaSaldoDev.toLocaleString('pt-BR'));
					}
					
				</h:outputScript>
			
		</awb-th:extDiv>
	</awb-h:panelGrid>
</div>


</html>